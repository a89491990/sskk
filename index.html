<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>üöÄ Airdrop Project Manager</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .glass {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.25);
    }
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="text-white font-sans">
  <div class="container mx-auto px-5 py-10">
    <div class="text-center mb-10">
      <h1 class="text-4xl font-extrabold mb-2 drop-shadow-lg">üöÄ Airdrop Project Manager</h1>
      <p class="text-gray-200 text-lg">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡¶∞‡¶≤‡ßá, ‡¶∏‡¶¨‡¶æ‡¶á ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶¨‡ßá</p>
      <button onclick="openModal()" class="mt-5 px-6 py-3 rounded-xl bg-indigo-500 hover:bg-indigo-600 text-white font-semibold shadow-lg">
        + ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
      </button>
    </div>

    <div id="projectsGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    <div id="emptyState" class="text-center text-white mt-10 hidden">
      <p class="text-2xl opacity-80">üìã ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶®‡ßá‡¶á</p>
    </div>
  </div>

  <!-- Modal -->
  <div id="projectModal" class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-60 z-50">
    <div class="glass rounded-2xl p-8 w-11/12 md:w-1/2 fade-in">
      <h2 id="modalTitle" class="text-2xl font-bold mb-5">‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
      <form id="projectForm" onsubmit="saveProject(event)">
        <input type="hidden" id="projectId">

        <div class="mb-4">
          <label class="block text-sm font-medium mb-2">‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ *</label>
          <input id="projectName" required class="w-full p-3 rounded-lg border border-gray-300 text-black">
        </div>

        <div class="mb-4">
          <label class="block text-sm font-medium mb-2">‡¶≤‡¶ø‡¶Ç‡¶ï</label>
          <input id="projectLink" type="url" class="w-full p-3 rounded-lg border border-gray-300 text-black">
        </div>

        <div class="mb-4">
          <label class="block text-sm font-medium mb-2">‡¶®‡ßã‡¶ü / ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</label>
          <textarea id="projectNotes" class="w-full p-3 rounded-lg border border-gray-300 text-black"></textarea>
        </div>

        <div class="mb-4">
          <label class="block text-sm font-medium mb-2">‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞</label>
          <select id="reminderType" class="w-full p-3 rounded-lg border border-gray-300 text-black">
            <option value="none">‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶®‡¶æ‡¶á</option>
            <option value="daily">‡¶°‡ßá‡¶á‡¶≤‡¶ø</option>
            <option value="weekly">‡¶â‡¶á‡¶ï‡¶≤‡¶ø</option>
          </select>
        </div>

        <div class="flex justify-end gap-3 mt-6">
          <button type="button" onclick="closeModal()" class="px-5 py-2 rounded-lg bg-gray-400 hover:bg-gray-500">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
          <button type="submit" class="px-5 py-2 rounded-lg bg-indigo-500 hover:bg-indigo-600">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const BIN_ID = "6927bb28d0ea881f40029c3e"; // ‚¨ÖÔ∏è ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Bin ID ‡¶¨‡¶∏‡¶æ‡¶ì
    const API_KEY = "$2a$10$oGg8RSUOeo1gxuEBtwe7K.XBhkAEYb8hxn31SZ/lovkudlLPfmK82";
    const JSON_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

    let projects = [];

    // Load data from JSONBin
    async function loadProjects() {
      try {
        const res = await fetch(JSON_URL, {
          headers: { "X-Master-Key": API_KEY }
        });
        const data = await res.json();
        projects = data.record?.projects || [];
        displayProjects();
      } catch (e) {
        console.error("Load error:", e);
      }
    }

    // Save data to JSONBin
    async function saveToServer() {
      try {
        await fetch(JSON_URL, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-Master-Key": API_KEY
          },
          body: JSON.stringify({ projects })
        });
      } catch (e) {
        alert("‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
      }
    }

    // Display projects
    function displayProjects() {
      const grid = document.getElementById("projectsGrid");
      const empty = document.getElementById("emptyState");
      grid.innerHTML = "";

      if (projects.length === 0) {
        empty.classList.remove("hidden");
        return;
      }
      empty.classList.add("hidden");

      projects.forEach(p => {
        const card = document.createElement("div");
        card.className = "glass rounded-2xl p-6 fade-in";
        card.innerHTML = `
          <h3 class="text-xl font-semibold mb-2 text-white">${p.name}</h3>
          ${p.link ? `<a href="${p.link}" class="text-blue-300 underline break-all" target="_blank">${p.link}</a>` : ""}
          ${p.notes ? `<p class="text-gray-200 mt-2">${p.notes}</p>` : ""}
          ${p.reminder !== "none" ? `<span class="mt-3 inline-block px-3 py-1 rounded-full text-sm font-medium ${p.reminder === "daily" ? "bg-green-500" : "bg-blue-500"}">üîî ${p.reminder === "daily" ? "Daily" : "Weekly"} Reminder</span>` : ""}
          <div class="flex gap-3 mt-4">
            <button class="px-3 py-1 bg-yellow-400 rounded-lg text-black font-semibold hover:bg-yellow-500" onclick='editProject("${p.id}")'>‚úèÔ∏è ‡¶è‡¶°‡¶ø‡¶ü</button>
            <button class="px-3 py-1 bg-red-500 rounded-lg text-white font-semibold hover:bg-red-600" onclick='deleteProject("${p.id}")'>üóëÔ∏è ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    function saveProject(event) {
      event.preventDefault();
      const id = document.getElementById("projectId").value || Date.now().toString();
      const project = {
        id,
        name: projectName.value,
        link: projectLink.value,
        notes: projectNotes.value,
        reminder: reminderType.value
      };
      const idx = projects.findIndex(p => p.id === id);
      if (idx >= 0) projects[idx] = project;
      else projects.push(project);
      saveToServer();
      displayProjects();
      closeModal();
    }

    function editProject(id) {
      const p = projects.find(x => x.id === id);
      if (!p) return;
      projectId.value = p.id;
      projectName.value = p.name;
      projectLink.value = p.link;
      projectNotes.value = p.notes;
      reminderType.value = p.reminder;
      openModal();
    }

    function deleteProject(id) {
      if (confirm("‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡¶ü‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) {
        projects = projects.filter(p => p.id !== id);
        saveToServer();
        displayProjects();
      }
    }

    function openModal() {
      document.getElementById("projectModal").classList.remove("hidden");
      document.getElementById("projectModal").classList.add("flex");
    }
    function closeModal() {
      document.getElementById("projectModal").classList.add("hidden");
      document.getElementById("projectModal").classList.remove("flex");
      document.getElementById("projectForm").reset();
    }

    loadProjects();
  </script>
</body>
</html>
