<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>Airdrop Project Manager (Shared)</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f3f4f6; margin: 0; padding: 20px; }
    .container { max-width: 800px; margin: auto; }
    h1 { text-align: center; color: #4f46e5; }
    button { padding: 10px 20px; background: #4f46e5; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background: #4338ca; }
    .project { background: white; padding: 15px; border-radius: 10px; margin-top: 15px; box-shadow: 0 3px 8px rgba(0,0,0,0.1); }
    .project h3 { margin: 0; color: #111827; }
    .project a { color: #2563eb; text-decoration: none; }
    .form-group { margin: 10px 0; }
    input, textarea, select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üöÄ Airdrop Project Manager</h1>
    <button onclick="openModal()">+ ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>

    <div id="projectsList"></div>

    <!-- Modal -->
    <div id="modal" style="display:none; background:rgba(0,0,0,0.5); position:fixed; top:0; left:0; width:100%; height:100%; justify-content:center; align-items:center;">
      <div style="background:white; padding:20px; border-radius:10px; width:400px;">
        <h2 id="modalTitle">‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü</h2>
        <form id="projectForm" onsubmit="saveProject(event)">
          <input type="hidden" id="projectId">
          <div class="form-group">
            <label>‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ</label>
            <input type="text" id="projectName" required>
          </div>
          <div class="form-group">
            <label>‡¶≤‡¶ø‡¶Ç‡¶ï</label>
            <input type="url" id="projectLink">
          </div>
          <div class="form-group">
            <label>‡¶®‡ßã‡¶ü</label>
            <textarea id="projectNotes"></textarea>
          </div>
          <div class="form-group">
            <label>‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞</label>
            <select id="reminderType">
              <option value="none">‡¶®‡¶æ‡¶á</option>
              <option value="daily">‡¶°‡ßá‡¶á‡¶≤‡¶ø</option>
              <option value="weekly">‡¶â‡¶á‡¶ï‡¶≤‡¶ø</option>
            </select>
          </div>
          <button type="submit">‚úÖ ‡¶∏‡ßá‡¶≠</button>
          <button type="button" onclick="closeModal()">‚ùå ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    // üîπ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ JSONBin API ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
    const BIN_ID = "6927bb28d0ea881f40029c3e";
    const API_KEY = "$2a$10$oGg8RSUOeo1gxuEBtwe7K.XBhkAEYb8hxn31SZ/lovkudlLPfmK82";
    const JSON_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

    let projects = [];

    // üî∏ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
    async function loadProjects() {
      try {
        const res = await fetch(JSON_URL, {
          headers: { "X-Master-Key": API_KEY }
        });
        const data = await res.json();
        projects = data.record?.projects || [];
        renderProjects();
      } catch (err) {
        alert("‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø!");
        console.error(err);
      }
    }

    // üî∏ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá ‡¶∏‡ßá‡¶≠
    async function saveToServer() {
      try {
        await fetch(JSON_URL, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-Master-Key": API_KEY
          },
          body: JSON.stringify({ projects })
        });
      } catch (err) {
        alert("‡¶∏‡ßá‡¶≠‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
        console.error(err);
      }
    }

    // üî∏ ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
    function renderProjects() {
      const list = document.getElementById("projectsList");
      list.innerHTML = "";
      projects.forEach(p => {
        const div = document.createElement("div");
        div.className = "project";
        div.innerHTML = `
          <h3>${p.name}</h3>
          ${p.link ? `<a href="${p.link}" target="_blank">üîó ${p.link}</a><br>` : ""}
          ${p.notes ? `<p>${p.notes}</p>` : ""}
          ${p.reminder !== "none" ? `<span>‚è∞ ${p.reminder.toUpperCase()} Reminder</span>` : ""}
          <br><button onclick="editProject('${p.id}')">‚úèÔ∏è ‡¶è‡¶°‡¶ø‡¶ü</button>
          <button onclick="deleteProject('${p.id}')">üóëÔ∏è ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>
        `;
        list.appendChild(div);
      });
    }

    // üî∏ ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
    function saveProject(event) {
      event.preventDefault();
      const name = projectName.value;
      const link = projectLink.value;
      const notes = projectNotes.value;
      const reminder = reminderType.value;
      const id = projectId.value || Date.now().toString();

      const index = projects.findIndex(p => p.id === id);
      const newProject = { id, name, link, notes, reminder };
      if (index >= 0) projects[index] = newProject;
      else projects.push(newProject);

      saveToServer();
      closeModal();
      renderProjects();
    }

    // üî∏ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ
    function editProject(id) {
      const p = projects.find(x => x.id === id);
      if (!p) return;
      projectId.value = p.id;
      projectName.value = p.name;
      projectLink.value = p.link;
      projectNotes.value = p.notes;
      reminderType.value = p.reminder;
      openModal(true);
    }

    // üî∏ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
    function deleteProject(id) {
      if (confirm("‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶ì?")) {
        projects = projects.filter(p => p.id !== id);
        saveToServer();
        renderProjects();
      }
    }

    // üî∏ Modal control
    function openModal() { document.getElementById("modal").style.display = "flex"; }
    function closeModal() { document.getElementById("modal").style.display = "none"; }

    loadProjects();
  </script>
</body>
</html>
